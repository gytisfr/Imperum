<html>
    <head>
        <title>Test</title>
        <script>
            async function getInfo() {
                const params = window.location.search;
                const paramsObj = new URLSearchParams(window.location.search);
                const code = paramsObj.get("code");
                
                const accessToken = await fetch("https://discord.com/api/v10/oauth2/token", {
                    "method": "POST",
                    "body": JSON.stringify({"grant_type": "authorization_code", "code": code, "redirect_uri": redirect}),
                    "headers": {
                        "Authorization": `Basic ${btoa(`${appId}:${clientSecret}`)}`,
                        "Content-Type": "application/x-www-form-urlencoded"
                    }
                }).then((response) => {
                    console.log(response);
                    accessToken = response.json();
                    console.log(response);
                })
            }
        </script>
    </head>
    <body onload="getInfo()">
        <button onclick="getInfo()">Click me!</button>
    </body>
</html>